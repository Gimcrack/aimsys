function noty_status(t){void 0!==status_noty&&status_noty.close(),status_noty=noty({text:t,type:"success",layout:"bottomLeft",theme:"defaultTheme",timeout:1300,killer:!0})}function noty_modal(t){modal_noty=noty({text:t,type:"success",dismissQueue:!0,layout:"bottomLeft",theme:"defaultTheme",modal:!0})}function noty_message(t,e,a,r){a=void 0!==a&&0!==a?!0:!1,to=a?0:4e3,void 0===r&&(r="topCenter");var s=noty({text:t,type:e,dismissQueue:!0,layout:r,theme:"defaultTheme",timeout:Number(to),animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:700}});return s}function checkout_message(t,e,a,r){a=void 0!==a&&0!==a?!0:!1,to=a?0:1500,void 0===r&&(r="topCenter");var s=$(".main-content.active .part.active .checkout_message_msg").noty({text:t,type:e,dismissQueue:!0,layout:r,theme:"defaultTheme",timeout:Number(to),force:1,maxVisible:1,animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:300}});return s}function raise_error(t){$("#spn_message").addClass("ui-state-error").html(t)}function validate_submit_form(t){$frm=$(t),validate_form($frm)&&t.submit()}function ucfirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}function formatInteger(t){return t.replace(/[^0-9]/gi,null)}function ajax_submit_all(t){$target=$(t),$forms=$("form",$target),$forms.each(function(t,e){ajax_submit("#"+$(e).attr("id"))})}function ajax_submit(frm){$frm_valid=validate_form(frm),$frm_valid&&(page=$(frm).attr("action"),target="undefined"!=typeof $(frm).attr("target")?$(frm).attr("target"):"#spn_content_1",targetScript=eval($(frm).attr("targetScript")),qs=$(frm).serialize(),maskAll("Saving..."),$.ajax({dataType:targetScript?"script":"html",url:page,data:qs,type:"POST",success:function(){unmaskAll()},error:function(){unmaskAll(),noty_message("There was an error processing your request. Please try again later.","error")}}))}function editor_submit(frm){$frm_valid=validate_form(frm),$frm_valid&&(page=$(frm).attr("action"),target="undefined"!=typeof $(frm).attr("target")?$(frm).attr("target"):"#spn_content_1",targetScript=eval($(frm).attr("targetScript")),qs=$(frm).serialize(),maskAll("Saving..."),$.ajax({dataType:targetScript?"script":"html",url:page,data:qs,type:"POST",success:function(){$frm=$(".main-content.active .part.active #frm_editor"),Tabs.activeTab.editing=!1,$qs=$("input:hidden",$frm).serialize(),checkin($qs),unmaskAll()},error:function(){unmaskAll(),noty_message("There was an error processing your request. Please try again later.","error")}}))}function editor_submit_popup(t){$url=$(t).attr("action"),$qs=$(t).serialize(),$.ajax({url:$url,data:$qs,type:"POST",success:function(t){$o=$.parseJSON(t),-1!=$o.msg_class.indexOf("success")?(Tabs.activeTab.update_select_options($o.rowid),Tabs.activeTab.popupTab.dlog.dialog("close")):noty_message($o.message,"error")}})}function change_password(t){$("<div/>").html($("#div_change_password").html()).dialog({width:410,modal:!0,title:"Change Password",position:{my:"top",at:"top+200",of:window},buttons:{Cancel:function(){$(this).dialog("destroy")},Reset:function(){$("#frm_change_password",this)[0].reset()},"Save & Close":function(){$frm=$("#frm_change_password",this),$frm_valid=validate_form($frm),$frm_valid&&($(t,Tabs.activeTab.$content).prop("disabled",!1).val($("#password_1",this).val()),$(this).dialog("destroy"),noty_message("Remember to click Save to save the new password","information"))}}})}function maskAll(){$("#main").mask()}function unmaskAll(){$("#main").unmask()}function ajax_submit_filter(){return 0==$(active_filter_form).length?!1:($active_subtab=$(".main-content.active #content-header-bar li.active").attr("id"),$frm=$(active_filter_form),target=$frm.attr("target"),$target=$(target),action=$frm.attr("action")+"&subtab="+$active_subtab,qs=$frm.serialize(),qs_search=$(".input-qv-cell-search",active_part).filter(function(){return $(this).val()}).serialize(),qs=qs_search+"&"+qs+"&search_criteria="+escape(qs_search)+"&tab_exists=1",maskAll("Processing..."),$.ajax({url:action,data:qs,type:"POST",success:function(t){Tabs.activeTab.loadJSON(t),unmaskAll()},error:_rF.ajax_general_error}),void 0)}function checkout(t){$.ajax({async:!1,url:"index.php?controller=checkout",data:t,type:"POST",dataType:"script",success:function(){},error:_rF.ajax_general_error})}function checkin(t){$.ajax({async:!1,url:"index.php?controller=checkin",data:t,type:"POST",dataType:"script",success:function(){},error:_rF.ajax_general_error})}function updateDOM(t){var e,a;if("string"==typeof t&&(t=document.getElementById(t)),"select-one"==t.type)for(e=0;e<t.options.length;e++)e==t.selectedIndex&&t.options[t.selectedIndex].setAttribute("selected","selected");else if("select-multiple"==t.type)for(e=0;e<t.options.length;e++)t.options[e].selected?t.options[e].setAttribute("selected","selected"):t.options[e].removeAttribute("selected");else if("text"==t.type)t.setAttribute("value",t.value);else if("textarea"==t.type)t.setAttribute("value",t.value),t.innerHTML=t.value;else if("checkbox"==t.type)t.checked?t.setAttribute("checked","checked"):t.removeAttribute("checked");else if("radio"==t.type)for(a=document.getElementsByName(t.name),e=0;e<a.length;e++)a[e].checked?a[e].setAttribute("checked","checked"):a[e].removeAttribute("checked")}var msg,msg_class,timeOuts=[],checkedOut=[],_rF=[],aj,to,activetab,lastactivetab,active_part=".main-content.active .part.active",active_filter_form=".main-content.active .part.active .form_filter",status_noty,modal_noty;$.ajaxSetup({cache:!1,timeout:1e4,type:"GET",error:function(){_rF.ajax_general_error()}}),String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.ucwords=function(){return str=this.toLowerCase(),str.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(t){return t.toUpperCase()})},String.prototype.formatInteger=function(){return this.replace(/[^0-9]/gi,null)},_rF[0]=function(){},_rF.ajax_general_error=function(t,e,a){"timeout"===a?(unmaskAll(),raise_error("There was a problem processing your request. Please try again.")):(unmaskAll(),raise_error(t))};